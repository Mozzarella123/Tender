@using TenderApp.Models.BusinessModels
@model IEnumerable<SubGroup>

@{
    ViewData["Title"] = "ManageSubs";
    }

@foreach (SubGroup s in Model)
{
    <div>
        <a class="btn btn-primary" data-toggle="collapse" href="#@s.Name" aria-expanded="false" aria-controls="collapseExample">
            @s.Name
        </a>
        <span>
            @{ 
                string text = s.ForType.ToString();
            }
            @text
        </span>
        <form asp-action="DeleteSubGroup">
            <input type="hidden" name="groupId" value="@s.SubGroupId" />
            <input type="submit" class="btn btn-primary" value="Удалить группу полей">
        </form>
        @*}*@
        @*@Html.ActionLink("Удалить группу полей", "DeleteSubGroup", "Admin", s.SubGroupId, new { @class = "btn btn-primary" })*@
    </div>

    <div class="collapse" id="@s.Name">
        <div class="card card-block">
            <table>
                @foreach(Sub sub in s.Subs.OrderBy(S=>-S.Priority))
                {
                    <tr>
                        <td>
                            @sub.Name
                        </td>
                        <td>
                            @{ 
                                string Text = "";
                                switch (sub.Type)
                                {
                                    case 0:Text = "TextBox";break;
                                    case 1:Text = "TextArea";break;
                                    case 2:Text = "Image";break;
                                }
                                Html.DisplayText(Text);
                            }   
                        </td>
                        <td>
                            @Html.ActionLink("Удалить поле", "DeleteSub", "Admin", sub, new { @class = "btn btn-default" })
                            @Html.ActionLink("Редактировать поле", "EditSub", "Admin", sub, new { @class = "btn btn-default" })
                        </td>
                    </tr>
                }
            </table>
            @Html.ActionLink("Добавить поле", "CreateSubFor", "Admin", s, new { @class = "btn btn-block btn-default btn-lg" })
        </div>
    </div>
}

<button class="btn btn-primary" type="button" id="SubGroupCreaterButton">Добавить группу полей</button>

<div id="SubGroupCreater" class="collapse">

</div>

